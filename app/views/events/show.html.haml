- content_for :title do
  %title= "Mission intel: #{@event.name}"

%h1= @event.name
%p
  = link_to 'back', events_path
  = link_to 'edit', edit_event_path(@event)

%dl
  %dt= Event.human_attribute_name :date
  %dd= @event.date
  - unless @event.time.blank?
    %dt= Event.human_attribute_name :time
    %dd= @event.time
  %dt= Event.human_attribute_name :price
  %dd= @event.price || 'No price information.' 
  - unless @event.venue.nil?
    %dt Venue
    %dd= link_to @event.venue.name, @event.venue
  %dt= Event.human_attribute_name :address
  %dd
    = @event.address
    %br/
    = @event.city
  %dt Links
  %dt
    %ul
      - @event.links.each do |link|
        %li= link_to link.text, link.url
  %dt Description
  %dd= display_format @event.description

- if current_user
  %h2 RSVPs
  - [ {title: 'Mastermind', method: :hosts},
      {title: 'Operative', method: :attendees},
      {title: 'Prospective', method: :maybes} ].each do |locals|
    = render 'shared/rsvp', locals.merge(object: @event)


  %h2 What about you?
  - attendance = current_user.attendance(@event)
  - unless attendance == 'host'
    = button_to "I'm hosting/organizing", event_hosts_path(@event)
  - unless attendance == 'attend'
    = button_to "I'm going", event_attendees_path(@event)
  - unless attendance == 'maybe'
    = button_to "Maybe...", event_maybes_path(@event)
  - if attendance
    = button_to "I won't be there", event_rsvp_path(@event), method: :delete
